## æŠ½è±¡ç»„ä»¶å³æ— æ¸²æŸ“ç»„ä»¶(å¦‚vueä¸­è‡ªå¸¦çš„keep-aliaveç»„ä»¶)



å°±åƒjavaä¸­çš„æŠ½è±¡ç±»ï¼Œå®ƒæœ¬èº«ä¸ç³Šåšä¸€äº›äº‹æƒ…ï¼Œåªæ˜¯æä¾›ä¸€äº›æŽ¥å£æ–¹æ³•ç­‰è®©å¤–éƒ¨ä½¿ç”¨ã€‚åŽç»­æˆ‘ä»¬å¯ä»¥ä¸æ–­æ‰©å±•è¯¥ç»„ä»¶å®žçŽ°æ›´å¥½æ›´å¼ºå¤§çš„ç»„ä»¶ã€‚è¿™ä¹Ÿæ­£æ˜¯[SOLID](https://blog.csdn.net/houzhizhen/article/details/79993880)

æ ¹æ®SOLIDçš„å•ä¸€èŒè´£åŽŸåˆ™ï¼š

> ä¸€ä¸ªç±»åº”è¯¥åªåšä¸€ä»¶äº‹ã€‚

ðŸŒ°æ —å­ï¼š

>  ä½ çš„ç»„ä»¶å¯èƒ½æœ‰ä¸€ä¸ªåå«`password-input`çš„ç»„ä»¶ï¼Œå®ƒè‚¯å®šå‘ˆçŽ°ä¸€ä¸ªå¯†ç è¾“å…¥æ¡†ã€‚é—®é¢˜åœ¨äºŽï¼Œå½“ä½ æƒ³è¦åœ¨å…¶ä»–é¡¹ç›®é‡ç”¨æ­¤ç»„ä»¶æ—¶ï¼Œä½ å¯èƒ½ä¸å¾—ä¸æŸ¥çœ‹ç»„ä»¶æºç ä¿®æ”¹æ ·å¼æˆ–è€…HTMLï¼Œä»¥ä¾¿èƒ½å’Œæ–°é¡¹ç›®çš„æ ·å¼æˆ–è®¾è®¡å›¾ä¿æŒä¸€è‡´ã€‚

å¦‚æžœä½ è¿™æ ·åšå°±ç ´åäº†`SOLID`åŽŸåˆ™ï¼Œä¹Ÿå°±æ˜¯å¼€é—­åŽŸåˆ™ã€‚

> ç±»æˆ–è€…ç»„ä»¶ï¼Œåº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚

ç”±äºŽvueäº†è§£`SOLID`åŽŸåˆ™ï¼Œæ‰€ä»¥å®ƒå…è®¸ç»„ä»¶å…·æœ‰`props`ã€`events`ã€`slots`ä»¥åŠ`scoped slots`ï¼Œä»Žè€Œä½¿ç»„ä»¶çš„é€šä¿¡å’Œæ‰©å±•å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚ç„¶åŽæˆ‘ä»¬å¯ä»¥æž„å»ºå…·æœ‰æ‰€æœ‰åŠŸèƒ½çš„ç»„ä»¶ï¼Œè€Œæ— éœ€ä»»ä½•æ ·å¼æˆ–HTMLã€‚å¯¹äºŽç¼–å†™å¯é‡ç”¨æ€§å’Œé«˜æ€§èƒ½çš„ä»£ç æ¥è¯´çœŸçš„ä¸é”™ã€‚



### ä»¥æŠ½è±¡ç»„ä»¶çš„å½¢å¼æž„å»ºä¸€ä¸ªå¼€å…³ç»„ä»¶

> æŠ½è±¡ç»„ä»¶å®šä¹‰

```javascript
// toggle.js
export default {
  props: {
    on: {
      type: Boolean,
      default: false
    }
  },
  render() {
    return this.$slots.default({
      on: this.currentState,
      setOn: this.setOn,
      setOff: this.setOff,
      toggle: this.toggle
    });
  },
  data() {
    return {
      currentState: this.on
    }
  },
  methods: {
    setOn() {
      this.currentState = true;
    },
    setOff() {
      this.currentState = false;
    },
    toggle() {
      this.currentState = !this.currentState
    }
  }
}
```



> æŠ½è±¡ç»„ä»¶åº”ç”¨

```html
<template>
	<Toggle>
    <div slot-scope="{ on, toggle}" class="container">
      <span 
       class="weui-switch"
       :class="{'weui-switch-on' : on}"
       @click="toggle"
       style="position:relative"
      >
        <div v-if="on" class="switch-text switch-text-left">
          å¼€
  			</div>
        <div v-if="!on" class="switch-text switch-text-right">
          å…³
  			</div>
  		</span>
  	</div>
  </Toggle>
</template>

<script lang='ts'>
import { Component, Vue, Provide } from "vue-property-decorator";
import Toggle from "@/components/Toggle.js"; // @ is an alias to /src

@Component({
  components: {
    Toggle
  }
})
export default class High extends Vue {}
</script>

<style>
.switch-text {
  width: 100%;
  height: 100%;
  position: absolute;
  padding: 0 5px;
  line-height: 24px;
  user-select: none;
  font-size: 14px;
}
.switch-text-left {
  text-align: left;
  color: #fff;
  left: 2px;
}
.switch-text-right {
  right: 2px;
  color: #7a7a7a;
  text-align: right;
}
.weui-switch {
  display: block;
  position: relative;
  width: 52px;
  height: 24px;
  border: 1px solid #dfdfdf;
  outline: 0;
  border-radius: 16px;
  box-sizing: border-box;
  background-color: #dfdfdf;
  transition: background-color 0.1s, border 0.1s;
  cursor: pointer;
}
.weui-switch:before {
  content: " ";
  position: absolute;
  top: 0;
  left: 0;
  width: 50px;
  height: 22px;
  border-radius: 15px;
  background-color: #fdfdfd;
  transition: transform 0.35s cubic-bezier(0.45, 1, 0.4, 1);
}
.weui-switch:after {
  content: " ";
  position: absolute;
  top: 0;
  left: 0;
  width: 22px;
  height: 22px;
  border-radius: 15px;
  background-color: #ffffff;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
  transition: transform 0.35s cubic-bezier(0.4, 0.4, 0.25, 1.35);
}
.weui-switch-on {
  border-color: #6f6f6f;
  background-color: #1add19;
}
.weui-switch-on:before {
  border-color: #1aad19;
  background-color: #409eff;
}
.weui-switch-on:after {
  transform: translateX(28px);
}
</style>
```

æ•ˆæžœç¤ºä¾‹ï¼š

![QQ20190629-172409-HD](https://imgoss.bfrontend.com/2019-06-29-092440.gif)
