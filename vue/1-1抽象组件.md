## 抽象组件即无渲染组件(如vue中自带的keep-aliave组件)



就像java中的抽象类，它本身不糊做一些事情，只是提供一些接口方法等让外部使用。后续我们可以不断扩展该组件实现更好更强大的组件。这也正是[SOLID](https://blog.csdn.net/houzhizhen/article/details/79993880)

根据SOLID的单一职责原则：

> 一个类应该只做一件事。

🌰栗子：

>  你的组件可能有一个名叫`password-input`的组件，它肯定呈现一个密码输入框。问题在于，当你想要在其他项目重用此组件时，你可能不得不查看组件源码修改样式或者HTML，以便能和新项目的样式或设计图保持一致。

如果你这样做就破坏了`SOLID`原则，也就是开闭原则。

> 类或者组件，应该对扩展开放，对修改关闭。

由于vue了解`SOLID`原则，所以它允许组件具有`props`、`events`、`slots`以及`scoped slots`，从而使组件的通信和扩展变得轻而易举。然后我们可以构建具有所有功能的组件，而无需任何样式或HTML。对于编写可重用性和高性能的代码来说真的不错。



### 以抽象组件的形式构建一个开关组件

> 抽象组件定义

```javascript
// toggle.js
export default {
  props: {
    on: {
      type: Boolean,
      default: false
    }
  },
  render() {
    return this.$slots.default({
      on: this.currentState,
      setOn: this.setOn,
      setOff: this.setOff,
      toggle: this.toggle
    });
  },
  data() {
    return {
      currentState: this.on
    }
  },
  methods: {
    setOn() {
      this.currentState = true;
    },
    setOff() {
      this.currentState = false;
    },
    toggle() {
      this.currentState = !this.currentState
    }
  }
}
```



> 抽象组件应用

```vue
<template>
	<Toggle>
    <div slot-scope="{ on, toggle}" class="container">
      <span 
       class="weui-switch"
       :class="{'weui-switch-on' : on}"
       @click="click(toggle)"
       style="position:relative"
      >
        <div v-if="on" class="switch-text switch-text-left">
          开
  			</div>
        <div v-if="!on" class="switch-text switch-text-right">
          关
  			</div>
  		</span>
  	</div>
  </Toggle>
</template>

<script lang='ts'>
import { Component, Vue, Provide } from "vue-property-decorator";
import Toggle from "@/components/Toggle.js"; // @ is an alias to /src

@Component({
  components: {
    Toggle
  }
})
export default class High extends Vue {}
</script>
```

效果示例：

![QQ20190629-172409-HD](http://imgoss.bfrontend.com/2019-06-29-092440.gif)